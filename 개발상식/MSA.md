# MSA(Microservice Architecture)
## Monolithic Architecture(모놀리식 아키텍처)
- MSA가 도입되기 이전의 전통적인 서비스의 형태
- 전체 어플리케이션이 하나로 통합되어 있어 관리하기가 편하다
- 개발환경 설정도 하나로 통일되어 있으므로 편하다

### 모놀리식 아키텍처의 단점
- 기존 어플리케이션에 새 기능을 넣고자 할때 수행해야 하는 테스트/컴파일/빌드/배포의 시간이 오래걸린다
- 개발환경이 통일되어 있는 점이 오히려 단점으로 작용한다.
  - 하나의 기능을 위해 프레임워크를 버전업 할 경우, 다른 기능들까지 영향을 받게 된다.
  - 하나의 프레임워크와 언어로 통일하여 개발해야만 한다. 
- 소스코드가 너무 복잡해진다.
- 특정 서비스에 트래픽이 몰릴 경우, 전체 서비스들이 영향을 받게 된다.

## MSA
- MSA란 단일 프로그램을 각 컴포넌트 별로 나누어 작은 서비스들의 조합으로 구축하는 방법
- 각 컴포넌트들이 필요할때마다 API Gateway를 사용하여 소통하는 방식을 사용한다.
- 대표적으로 아마존과 넷플릭스에서 MSA를 사용하고 있다.
- MSA의 태생상 밀접하게 연관된 툴이 존재한다
  - docker: 컨테이너에 담아 서비스를 배포하기 위해 사용
  - kubernetes: 컨테이너가 많을 때, 이 컨테이너들을 관리하기 위해 사용
  - kafka: 서비스간의 소통을 빠르게 하기 위해 사용
  - Prometheus: 서비스들을 모니터링 하기 위해 사용

## MSA의 장점
- 각 서비스들은 독립된 서버에서 작동할 수 있고, 배포 역시 독립적으로 이뤄질 수 있음
- 프로그램의 수정시 하나의 서비스만 수정하면 되므로 속도가 향상됨
- 개발환경을 독립적으로 선택할 수 있다
  - 각 서비스들이 서로 다른 언어와 프레임워크를 사용할 수 있다
  - 버전업 과정도 매우 쉬워진다
- 특정 서비스에 트래픽이 몰릴 경우, 해당 서비스만 크기를 키워 해결 할 수 있음

## MSA의 단점
- 전체적인 복잡도가 상승한다.
  - 개발이 쉬워지는 대신 운영 복잡도가 더욱 증가하여 결과적으로 전체적인 복잡도는 모놀리식보다 더 증가할 수 있다
- 툴의 사용이 반 필수이다
  - 툴의 사용 방법을 추가적으로 익혀야 한다
  - 개발보다도 툴의 관리에 사용하는 시간이 더 많이 들 수 있다
- 분리된 서비스들끼리 통신에 오류가 발생하여 원활한 서비스 제공에 실패할 수도 있다
- MSA에 소속된 서비스의 양이 증가할 수록 특정 기능을 담당하는 서비스를 찾기 힘들어진다
  - 오류의 원인을 찾기 또한 힘들어진다.

## 결론
- MSA는 무조건 정답이 아니다!
- 서비스가 매우 크다 하더라도 굳이 MSA만이 정답은 아니다
- 아직 서비스가 작지만 미래를 위해 미리 MSA를 도입하는 경우도 굳이 필요 없다
  - MSA를 도입하기 전에 먼저 모놀리식 서비스를 만들어두고 서비스 하나씩 분리하면서 MSA를 도입하는 것도 가능하다

-----------
## 참고자료
- https://www.youtube.com/watch?v=ZRpsB3ODr6M
- http://clipsoft.co.kr/wp/blog/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98msa-%EA%B0%9C%EB%85%90/
