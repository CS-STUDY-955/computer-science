# 리팩터링의 원칙
## 리팩터링(Refactoring)
- 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 수정하기 쉽도록 내부 구조를 변경하는 것
- 겉보기 동작을 유지한다는 것은 사용자 관점에서 기능이 동일해야한다는 뜻이다.
- TDD 방법론의 한 축을 담당하고 있다.
- 성능 최적화와의 차이점은, 리팩터링은 이해하기 쉽게 만드는 것에 중점을 두므로 더 느려질 수도 있다는 것이다.

## 2개의 모자(Two Hats)
- 소프트웨어를 개발할 때, 목적을 명확히 구분하여 작업해야 한다는 비유
- 기능추가 모자를 썼을 땐, 기존 코드를 건드리지 말고 새 기능 추가만 해야하고
- 리팩터링 모자를 썼을 땐, 신규 테스트케이스 작성도 하지말고 오로지 코드 재구성에만 전념해야한다.

## 리팩터링을 하는 이유
1. 설계 개선: 중복 코드 제거, 초기 구조 및 설계 유지보수
2. 소프트웨어에 대한 가독성 증가
3. 버그 발견 용이
4. 프로그래밍 속도 증대: 리팩터링을 할 땐, 초기 시간 소모가 존재하나, 장기적으론 빨라지는 결과로 이어짐
5. 그 외, 이름이 이상하거나, 함수가 너무 길거나, 매개변수 목록이 너무 길거나, 반복문이 많거나, 한 클래스가 너무 크거나 등등

## 리팩터링을 해야할 때와 하지 말아야 할 때
- 리팩터링은 날잡고 하는게 아니라 수시로 하는 것이 옮다
  - 코드 베이스에 기능을 새로 추가하기 직전에 구조를 개선하기 위해
  - 카드가 하는 일을 파악했을 때 의도를 명확하게 하기 위해
  - 비효율적인 코드를 봤을 때(쓰레기 줍기)
- 내부 동작을 분석할 필요가 없거나, 그냥 새 코드를 작성하는게 더 낫다면 리팩터링을 하지 않는 편이 더 좋다. 

## 고려할 점
- 코드 소유권: 코드 소유권이 얽혀있는 경우라면(예: 다른 팀이나 고객에게 존재할 경우), 리팩터링에 방해가 된다.
- 브랜치: 리팩터링을 진행할 경우 보통 별도의 브랜치에서 진행하기 때문에, 리팩터링이 오래 걸릴 수록 마스터 브랜치에 통합하기 힘들어짐
- 테스팅: 리팩터링을 한 뒤에 동작이 깨지면 안된다.
- 레거시 코드: 보통 복잡하고 테스트 코드도 없고 다른 사람이 작성했기 때문에 리팩터링에 난점이 존재함. 테스트 보강 선행 필수

=======================================
## 참고 문헌
- 1차 출처: 마틴 파울러, 『리팩토링』, 한빛미디어, 2020.04.01
- 2차 출처: https://ifuwanna.tistory.com/503