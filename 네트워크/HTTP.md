# HTTP
## 1. HTTP란?
- Hypertext Transfer Protocol
- 인터넷상에서 데이터를 주고받기 위한 서버/클라이언트 모델을 따르는 프로토콜
  - 클라이언트: HTTP 프로토콜을 통해 웹 오브젝트들을 요청/수신/표시하는 측
  - 서버: HTTP 프로토콜을 통해 요청에 따라 응답으로 웹 오브젝트를 보내는 측 
- 애플리케이션 레이어에서 작동
- TCP를 사용하며, 그 과정은 이하와 같음
    1. 클라이언트가 포트번호 80으로 TCP 커넥션을 시작
    2. 서버가 TCP 커넥션을 수락
    3. 둘 사이에 HTTP 메세지를 교환(통신)
    4. TCP 커넥션 종료
- stateless: 서버는 이전에 보냈던 클라이언트의 요청을 전혀 기억하지 않는다.

## 2. HTTP의 연결방식
### non-Persistent HTTP
- TCP 연결 1번에 최대 하나의 객체를 전송할 수 있음
- 전송이 1회 완료되면 커넥션을 끊음
- 연결과정의 예시
    1. 클라측)클라이언트가 서버에 연결을 요청
    2. 서버측)해당 url의 호스트가 연결을 수락하고 클라이언트에게 알림
    3. 클라측)클라이언트가 HTTP 리퀘스트 메세지를 소켓을 통해 보내서 원하는 웹 오브젝트를 알림
    4. 서버측)서버는 리퀘스트 메세지를 수락하고, 소켓을 통해 response 메세지를 통해 요청한 웹 오브젝트들을 보냄
    5. 서버측)서버는 연결을 종료시킴
    6. 클라측)수령한 메세지를 통해 화면에 표시
    7. 연결을 다시 시작할땐 1번부터 다시<br>
![non-per_rtt.PNG](https://user-images.githubusercontent.com/63623597/217246088-8823ee4d-a094-46bd-9209-b7f75717e793.PNG)
- 요청 한번을 실행하는데 총 2번의 RTT(Round Trip Time) + 파일의 전송에 걸리는 시간이 걸림
- 요청을 계속 실행하는 것도 OS에 오버헤드를 줌

### Persistent HTTP
- 전송이 모두 완료될때까지 연결을 유지
- 클라이언트는 참조된 객체를 만나는 즉시 request를 보냄
- 위의 경우와 달리 레퍼런스 오브젝트를 1번의 RTT로 줄일 수 있음
- 클라이언트의 부담이 줄어든 만큼 서버의 부담이 증가
- 감당할 수 없을 만큼의 클라이언트가 접속하기 시작하면 더 이상 접속에 대처할 수 없게 됨

## 3. HTTP 메세지
- HTTP 리퀘스트 메세지(요청)와 HTTP 리스폰스 메시지(응답)이 있음
- 사람이 읽기 편한 ASCII포맷으로 적혀 있음
- 구조
    1. start line: 첫번째 줄에 위치히여 요청이나 응답의 상태를 나타냄
    2. HTTP headers: 요청을 지정하거나 본문을 설명하는 내용의 집합
    3. empty line: 헤더와 본문을 구분하는 빈줄(내용은 없음)
    4. body: 요청과 관련된 데이터나 응답과 관련된 데이터 또는 문서를 포함

### 요청 메세지
- 클라이언트가 서버에 보내는 메세지
- start line에 HTTP 메서드(GET/PUT/POST 등), 요청 대상, HTTP 버전을 담는다

### 응답 메세지
- 서버가 클라이언트에 보내는 메세지
- 특별히 start line을 status line이라고 부르기도 함
- status line에 프로토콜 버전, 상태 코드(404 등), 상태 텍스트(Not Found 등)을 담는다

=================================
### 참고 문헌
- https://shlee0882.tistory.com/107
- https://hanamon.kr/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-http-%EB%A9%94%EC%84%B8%EC%A7%80-message-%EC%9A%94%EC%B2%AD%EA%B3%BC-%EC%9D%91%EB%8B%B5-%EA%B5%AC%EC%A1%B0/